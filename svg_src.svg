<svg width="800" height="600" viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
  <!-- 背景 -->
  <rect width="800" height="600" fill="#f9f9f9"/>
  
  <!-- 标题 -->
  <text x="400" y="30" font-family="Arial" font-size="24" text-anchor="middle" font-weight="bold">Transformer Encoder-Decoder 架构</text>
  
  <!-- 输入序列 -->
  <rect x="50" y="120" width="120" height="60" rx="10" fill="#e6f7ff" stroke="#1890ff" stroke-width="2"/>
  <text x="110" y="155" font-family="Arial" font-size="16" text-anchor="middle">输入序列</text>
  <text x="110" y="175" font-family="Arial" font-size="14" text-anchor="middle">x₁, x₂, ..., xₙ</text>
  
  <!-- 嵌入层 -->
  <rect x="200" y="120" width="120" height="60" rx="10" fill="#fff2e8" stroke="#fa8c16" stroke-width="2"/>
  <text x="260" y="155" font-family="Arial" font-size="16" text-anchor="middle">输入嵌入</text>
  
  <!-- Encoder -->
  <rect x="350" y="80" width="180" height="140" rx="10" fill="#f6ffed" stroke="#52c41a" stroke-width="2"/>
  <text x="440" y="110" font-family="Arial" font-size="16" text-anchor="middle" font-weight="bold">Encoder</text>
  
  <!-- Encoder层1 -->
  <rect x="370" y="120" width="140" height="50" rx="5" fill="#e6fffb" stroke="#13c2c2" stroke-width="2"/>
  <text x="440" y="150" font-family="Arial" font-size="14" text-anchor="middle">Encoder Layer 1</text>
  
  <!-- Encoder层2 -->
  <rect x="370" y="180" width="140" height="50" rx="5" fill="#e6fffb" stroke="#13c2c2" stroke-width="2"/>
  <text x="440" y="210" font-family="Arial" font-size="14" text-anchor="middle">Encoder Layer 2</text>
  <text x="440" y="230" font-family="Arial" font-size="12" text-anchor="middle">...</text>
  
  <!-- Decoder -->
  <rect x="350" y="250" width="180" height="190" rx="10" fill="#fff1f0" stroke="#f5222d" stroke-width="2"/>
  <text x="440" y="280" font-family="Arial" font-size="16" text-anchor="middle" font-weight="bold">Decoder</text>
  
  <!-- Decoder层1 -->
  <rect x="370" y="310" width="140" height="50" rx="5" fill="#fff7e6" stroke="#faad14" stroke-width="2"/>
  <text x="440" y="340" font-family="Arial" font-size="14" text-anchor="middle">Decoder Layer 1</text>
  
  <!-- Decoder层2 -->
  <rect x="370" y="370" width="140" height="50" rx="5" fill="#fff7e6" stroke="#faad14" stroke-width="2"/>
  <text x="440" y="400" font-family="Arial" font-size="14" text-anchor="middle">Decoder Layer 2</text>
  <text x="440" y="420" font-family="Arial" font-size="12" text-anchor="middle">...</text>
  
  <!-- 输出嵌入 -->
  <rect x="550" y="180" width="120" height="60" rx="10" fill="#fff2e8" stroke="#fa8c16" stroke-width="2"/>
  <text x="610" y="215" font-family="Arial" font-size="16" text-anchor="middle">输出嵌入</text>
  
  <!-- 输出序列 -->
  <rect x="690" y="120" width="120" height="60" rx="10" fill="#e6f7ff" stroke="#1890ff" stroke-width="2"/>
  <text x="750" y="155" font-family="Arial" font-size="16" text-anchor="middle">输出序列</text>
  <text x="750" y="175" font-family="Arial" font-size="14" text-anchor="middle">y₁, y₂, ..., yₘ</text>
  
  <!-- 连接线 -->
  <line x1="170" y1="150" x2="200" y2="150" stroke="#000" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="320" y1="150" x2="350" y2="150" stroke="#000" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="530" y1="210" x2="550" y2="210" stroke="#000" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="670" y1="150" x2="690" y2="150" stroke="#000" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Encoder到Decoder的连接 -->
  <line x1="440" y1="220" x2="440" y2="250" stroke="#000" stroke-width="2" stroke-dasharray="5,3" marker-end="url(#arrowhead)"/>
  
  <!-- 输出嵌入到Decoder的连接 -->
  <line x1="550" y1="240" x2="500" y2="340" stroke="#000" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Encoder层内部结构 -->
  <text x="100" y="300" font-family="Arial" font-size="16" text-anchor="middle" font-weight="bold">Encoder层细节</text>
  
  <!-- 自注意力 -->
  <rect x="40" y="340" width="120" height="50" rx="5" fill="#e6fffb" stroke="#13c2c2" stroke-width="2"/>
  <text x="100" y="370" font-family="Arial" font-size="14" text-anchor="middle">多头自注意力</text>
  
  <!-- 前馈网络 -->
  <rect x="40" y="400" width="120" height="50" rx="5" fill="#f0f5ff" stroke="#1890ff" stroke-width="2"/>
  <text x="100" y="430" font-family="Arial" font-size="14" text-anchor="middle">前馈网络</text>
  
  <!-- 连接线 -->
  <line x1="100" y1="390" x2="100" y2="400" stroke="#000" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Decoder层内部结构 -->
  <text x="280" y="300" font-family="Arial" font-size="16" text-anchor="middle" font-weight="bold">Decoder层细节</text>
  
  <!-- 掩码自注意力 -->
  <rect x="220" y="340" width="120" height="50" rx="5" fill="#fff7e6" stroke="#faad14" stroke-width="2"/>
  <text x="280" y="370" font-family="Arial" font-size="14" text-anchor="middle">掩码自注意力</text>
  
  <!-- 交叉注意力 -->
  <rect x="220" y="400" width="120" height="50" rx="5" fill="#fff1f0" stroke="#f5222d" stroke-width="2"/>
  <text x="280" y="430" font-family="Arial" font-size="14" text-anchor="middle">交叉注意力</text>
  
  <!-- 前馈网络 -->
  <rect x="220" y="460" width="120" height="50" rx="5" fill="#f0f5ff" stroke="#1890ff" stroke-width="2"/>
  <text x="280" y="490" font-family="Arial" font-size="14" text-anchor="middle">前馈网络</text>
  
  <!-- 连接线 -->
  <line x1="280" y1="390" x2="280" y2="400" stroke="#000" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="280" y1="450" x2="280" y2="460" stroke="#000" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- 交叉注意力连接 -->
  <line x1="160" y1="430" x2="220" y2="430" stroke="#000" stroke-width="2" stroke-dasharray="5,3" marker-end="url(#arrowhead)"/>
  
  <!-- 箭头标记 -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#000"/>
    </marker>
  </defs>
</svg>
